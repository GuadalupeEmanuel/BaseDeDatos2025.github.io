<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tareas - Base de Datos II</title>
  <style>
    * {margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif;}
    body {background-color: #f4f6f9; color: #333; padding: 20px;}
    header {text-align: center; margin-bottom: 30px;}
    header h1 {font-size: 2rem; color: #2c3e50;}
    .contenido {display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;}
    .semana {
      background: white; border-radius: 15px; padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .semana:hover {transform: translateY(-5px);}
    .semana h2 {font-size: 1.3rem; margin-bottom: 15px; color: #34495e;}
    .btn {
      display: inline-block; padding: 10px 15px; border-radius: 8px;
      text-decoration: none; font-weight: bold; color: white;
      background-color: #3498db; margin-bottom: 15px; transition: background 0.3s;
    }
    .btn:hover {background-color: #2980b9;}
    .archivos-lista {display: none; list-style: none; padding-left: 0;}
    .archivos-lista li {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 10px; margin: 5px 0;
      border: 1px solid #ddd; border-radius: 8px;
      background: #fafafa;
    }
    .archivos-lista li span {flex: 1; margin-right: 10px;}
    .archivos-lista a {
      margin-left: 8px; padding: 5px 10px;
      border-radius: 5px; text-decoration: none; font-size: 0.9rem;
    }
    .ver-btn {background: #2ecc71; color: white;}
    .ver-btn:hover {background: #27ae60;}
    .download-btn {background: #e67e22; color: white;}
    .download-btn:hover {background: #d35400;}
    .icono {font-size: 2rem; margin-bottom: 10px;}
  </style>
</head>
<body>
  <header>
    <h1>📚 Tareas - Base de Datos II</h1>
    <p>Selecciona la semana y revisa los archivos disponibles</p>
  </header>

  <main class="contenido" id="contenido"></main>

  <script>
    const usuario = "GuadalupeEmanuel";
    const repo = "25.github.io";
    const semanas = 16;
    const contenido = document.getElementById('contenido');
    const iconos = ["📘","📗","📙","📕","📖","📝","📂","📊","💾","📡","🔐","⚙️","🖥️","📑","📋","📦"];

    for(let i=1;i<=semanas;i++){
      const divSemana = document.createElement('div');
      divSemana.className='semana';

      const icono = document.createElement('div');
      icono.className='icono';
      icono.textContent=iconos[i-1];
      divSemana.appendChild(icono);

      const h2 = document.createElement('h2');
      h2.textContent=`Semana ${i}`;
      divSemana.appendChild(h2);

      const btnArchivos = document.createElement('a');
      btnArchivos.className='btn';
      btnArchivos.textContent="📄 Ver archivos";
      btnArchivos.href="#";
      btnArchivos.addEventListener("click", function(e){
        e.preventDefault();
        toggleArchivos(i);
      });
      divSemana.appendChild(btnArchivos);

      const listaArchivos = document.createElement('ul');
      listaArchivos.className="archivos-lista";
      listaArchivos.id = `archivos-semana-${i}`;
      divSemana.appendChild(listaArchivos);

      contenido.appendChild(divSemana);
    }

    function toggleArchivos(semana){
      const lista = document.getElementById(`archivos-semana-${semana}`);
      if(lista.style.display === "block"){
        lista.style.display = "none";
      } else {
        mostrarArchivos(semana);
      }
    }

    function mostrarArchivos(semana){
      const lista = document.getElementById(`archivos-semana-${semana}`);
      lista.style.display = "block";
      lista.innerHTML = "Cargando archivos...";

      fetch(`https://api.github.com/repos/${usuario}/${repo}/contents/Semana${semana}`)
      .then(response => response.json())
      .then(data => {
        lista.innerHTML = "";
        if(Array.isArray(data)){
          data.forEach(archivo => {
            const li = document.createElement("li");

            const nombre = document.createElement("span");
            nombre.textContent = archivo.name;

            const acciones = document.createElement("div");

            // 🔹 URL de GitHub Pages
            const baseUrl = `https://${usuario}.github.io/${repo}/Semana${semana}/${archivo.name}`;

            // Botón Ver (usamos Google Docs Viewer si es PDF/Word/Excel/PPT)
            const verBtn = document.createElement("a");
            if (archivo.name.endsWith(".pdf") || archivo.name.endsWith(".docx") || archivo.name.endsWith(".pptx") || archivo.name.endsWith(".xlsx")) {
              verBtn.href = `https://docs.google.com/viewer?url=${baseUrl}&embedded=true`;
            } else {
              verBtn.href = baseUrl;
            }
            verBtn.className = "ver-btn";
            verBtn.target = "_blank";
            verBtn.textContent = "Ver";

            // Botón Descargar
            const downloadBtn = document.createElement("a");
            downloadBtn.href = archivo.download_url;
            downloadBtn.className = "download-btn";
            downloadBtn.textContent = "Descargar";
            downloadBtn.download = archivo.name;

            acciones.appendChild(verBtn);
            acciones.appendChild(downloadBtn);

            li.appendChild(nombre);
            li.appendChild(acciones);
            lista.appendChild(li);
          });
        } else {
          lista.innerHTML = "No hay archivos o carpeta no encontrada.";
        }
      })
      .catch(err => {
        lista.innerHTML = "Error al cargar archivos.";
        console.error(err);
      });
    }
  </script>
</body>
</html>

